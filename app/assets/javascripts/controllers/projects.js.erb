app.controller('ProjectController', ['$scope', '$http', function ($scope, $http) {

    $scope.projects = projects;

    $http.get('/projects').
      then(function(response) {
        $scope.projects = response.data;
      }, function(response) {
      });

    $scope.createProject = function(event) {
      event.preventDefault();

      alert(12);
    };

    $scope.editProjectTitle = function(project, event) {
      event.preventDefault();

      var titleBlock = angular.element(event.currentTarget)
                        .parent().parent().parent();
      projectTitle = titleBlock.find('h3').text();
      titleBlock
        .addClass('edit-mode')
        .find('input')
        .val(projectTitle)[0]
        .focus();
    };

    $scope.deleteProject = function(project, event) {
      event.preventDefault();

      if (confirm('Are you sure ?')) {
        $http.delete('/projects/' + project.id).
          then(function(response) {
            $scope.projects.forEach(function(item, i, arr) {
              if (item.id == project.id) {
                arr.splice(i, 1);
              }
            })
          }, function(response) {
          });
      }
    };

  $scope.submitProjectTitle = function(project, event) {
    var input = angular.element(event.currentTarget).find('input');
    var titleBlock = input.parent().parent();
    titleBlock.find('h3').text(input.val());
    input.val('');
    titleBlock.removeClass('edit-mode');
  };

}]);